
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://heal-docs-dev.io/notebooks/Opioid_Prevalence_And_Overdoses/">
      
      <link rel="icon" href="../../img/heal_logo.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.3">
    
    
      
        <title>Opioid Prevalence And Overdoses - HEAL Example Analysis</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7a952b86.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Montserrat";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="heal_platform" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#opioid-related-deaths-and-opioid-prevalence" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://healdata.org" title="HEAL Example Analysis" class="md-header__button md-logo" aria-label="HEAL Example Analysis" data-md-component="logo">
      
  <img src="../../assets/HEAL_Initiative_White-cropped.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HEAL Example Analysis
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Opioid Prevalence And Overdoses
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://healdata.org" title="HEAL Example Analysis" class="md-nav__button md-logo" aria-label="HEAL Example Analysis" data-md-component="logo">
      
  <img src="../../assets/HEAL_Initiative_White-cropped.svg" alt="logo">

    </a>
    HEAL Example Analysis
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://healdata.org/" class="md-nav__link">
        Return to Platform
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Example Analysis Notebooks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Example Analysis Notebooks" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Example Analysis Notebooks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../BACPAC_Synthetic_Data_Analysis/" class="md-nav__link">
        BACPAC Synthetic Data Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Stigma-Reduction-Among_PCCs/" class="md-nav__link">
        Stigma Reduction Among PCCs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Opioid_Risk_Metric_Threshold_Identification-Study_Recreation/" class="md-nav__link">
        Opioid Risk Metric Threshold Identification - Study Recreation
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Opioid Prevalence And Overdoses
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Opioid Prevalence And Overdoses
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#j-montgomery-maxwell" class="md-nav__link">
    J Montgomery Maxwell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06282021" class="md-nav__link">
    06/28/2021
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-setup-notebook" class="md-nav__link">
    1) Setup Notebook
  </a>
  
    <nav class="md-nav" aria-label="1) Setup Notebook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-code-for-graphics" class="md-nav__link">
    Common Code for Graphics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-import-datasets" class="md-nav__link">
    2) Import Datasets
  </a>
  
    <nav class="md-nav" aria-label="2) Import Datasets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-dea-arcos" class="md-nav__link">
    Import DEA ARCOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-cdc-wonder" class="md-nav__link">
    Import CDC WONDER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-national-opioid-deaths-and-opioid-prevalence" class="md-nav__link">
    3) National Opioid Deaths And Opioid Prevalence
  </a>
  
    <nav class="md-nav" aria-label="3) National Opioid Deaths And Opioid Prevalence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#national-unintentional-opioid-overdoses-and-suicides" class="md-nav__link">
    National Unintentional Opioid Overdoses And Suicides
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#national-opioid-prevalence" class="md-nav__link">
    National Opioid Prevalence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#states-with-the-highest-annual-overdose-rate" class="md-nav__link">
    States With The Highest Annual Overdose Rate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-data-cleaning" class="md-nav__link">
    4) Data Cleaning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-west-virginias-opioid-overdoses-and-suicides" class="md-nav__link">
    5) West Virginia's Opioid Overdoses and Suicides
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-conclusions" class="md-nav__link">
    6) Conclusions
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Monitoring_The_Future_12th_Grader_Opiate_Use_In_2019/" class="md-nav__link">
        MTF 12th Grader Opiate Use In 2019
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        FAQs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        Contact
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#j-montgomery-maxwell" class="md-nav__link">
    J Montgomery Maxwell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06282021" class="md-nav__link">
    06/28/2021
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-setup-notebook" class="md-nav__link">
    1) Setup Notebook
  </a>
  
    <nav class="md-nav" aria-label="1) Setup Notebook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-code-for-graphics" class="md-nav__link">
    Common Code for Graphics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-import-datasets" class="md-nav__link">
    2) Import Datasets
  </a>
  
    <nav class="md-nav" aria-label="2) Import Datasets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-dea-arcos" class="md-nav__link">
    Import DEA ARCOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-cdc-wonder" class="md-nav__link">
    Import CDC WONDER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-national-opioid-deaths-and-opioid-prevalence" class="md-nav__link">
    3) National Opioid Deaths And Opioid Prevalence
  </a>
  
    <nav class="md-nav" aria-label="3) National Opioid Deaths And Opioid Prevalence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#national-unintentional-opioid-overdoses-and-suicides" class="md-nav__link">
    National Unintentional Opioid Overdoses And Suicides
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#national-opioid-prevalence" class="md-nav__link">
    National Opioid Prevalence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#states-with-the-highest-annual-overdose-rate" class="md-nav__link">
    States With The Highest Annual Overdose Rate
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-data-cleaning" class="md-nav__link">
    4) Data Cleaning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-west-virginias-opioid-overdoses-and-suicides" class="md-nav__link">
    5) West Virginia's Opioid Overdoses and Suicides
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-conclusions" class="md-nav__link">
    6) Conclusions
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="opioid-related-deaths-and-opioid-prevalence">Opioid Related Deaths and Opioid Prevalence<a class="headerlink" href="#opioid-related-deaths-and-opioid-prevalence" title="Permanent link">&para;</a></h1>
<h4 id="j-montgomery-maxwell">J Montgomery Maxwell<a class="headerlink" href="#j-montgomery-maxwell" title="Permanent link">&para;</a></h4>
<h4 id="06282021">06/28/2021<a class="headerlink" href="#06282021" title="Permanent link">&para;</a></h4>
<p>This notebook is a snapshot of publicly available data from HEAL and includes the DEA-ARCOS and CDC WONDER datasets. Data visualizations illustrate the national rise in opioid related overdoses and suicides, the rise in prevalence of opioid pills, and the current stage of the opioid epidemic in select states.
The graphics presented here should not be considered as part of a rigorous study of the opioid epidemic or of public health policy. The purpose of this notebook is merely to demonstrate the advantages and capabilities of using the University of Chicago's Center for Translational Data Science's HEAL Data Commons.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<p>1) Setup Notebook
2) Import Datasets
3) National Opioid Deaths and Opioid Prevalence
4) Data Cleaning
5) West Virginia's Opioid Overdoses And Suicides
6) Conclusions</p>
<h2 id="1-setup-notebook">1) Setup Notebook<a class="headerlink" href="#1-setup-notebook" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">matplotlib</span> <span class="o">-</span><span class="n">q</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">FutureWarning</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">FuncFormatter</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Markdown</span><span class="p">,</span> <span class="n">Image</span><span class="p">,</span> <span class="n">display</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s1">&#39;img/Opioid_Prevalence_And_Overdoses&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">gen3</span> <span class="n">drs</span><span class="o">-</span><span class="n">pull</span> <span class="nb">object</span> <span class="n">dg</span><span class="o">.</span><span class="n">H34L</span><span class="o">/</span><span class="mi">4</span><span class="n">b26774b</span><span class="o">-</span><span class="mi">4629</span><span class="o">-</span><span class="mi">4363</span><span class="o">-</span><span class="mi">8443</span><span class="o">-</span><span class="n">e335d0de40c2</span>
<span class="err">!</span><span class="n">gen3</span> <span class="n">drs</span><span class="o">-</span><span class="n">pull</span> <span class="nb">object</span> <span class="n">dg</span><span class="o">.</span><span class="n">H34L</span><span class="o">/</span><span class="mi">173</span><span class="n">bf921</span><span class="o">-</span><span class="mi">776</span><span class="n">f</span><span class="o">-</span><span class="mi">4</span><span class="n">c86</span><span class="o">-</span><span class="mi">8</span><span class="n">ea0</span><span class="o">-</span><span class="mi">619</span><span class="n">afdba0f1e</span>
<span class="err">!</span><span class="n">gen3</span> <span class="n">drs</span><span class="o">-</span><span class="n">pull</span> <span class="nb">object</span> <span class="n">dg</span><span class="o">.</span><span class="n">H34L</span><span class="o">/</span><span class="mi">4</span><span class="n">f2764bd</span><span class="o">-</span><span class="mi">8847</span><span class="o">-</span><span class="mi">4037</span><span class="o">-</span><span class="n">ad1b</span><span class="o">-</span><span class="mi">0</span><span class="n">c16d15f38d9</span>
<span class="err">!</span><span class="n">gen3</span> <span class="n">drs</span><span class="o">-</span><span class="n">pull</span> <span class="nb">object</span> <span class="n">dg</span><span class="o">.</span><span class="n">H34L</span><span class="o">/</span><span class="mi">8128</span><span class="n">a7c0</span><span class="o">-</span><span class="mi">1791</span><span class="o">-</span><span class="mi">4380</span><span class="o">-</span><span class="n">b7b1</span><span class="o">-</span><span class="n">a9af8a104304</span>
<span class="err">!</span><span class="n">gen3</span> <span class="n">drs</span><span class="o">-</span><span class="n">pull</span> <span class="nb">object</span> <span class="n">dg</span><span class="o">.</span><span class="n">H34L</span><span class="o">/</span><span class="n">e091ebec</span><span class="o">-</span><span class="n">f111</span><span class="o">-</span><span class="mi">4917</span><span class="o">-</span><span class="mi">8317</span><span class="o">-</span><span class="mi">204</span><span class="n">c6b969011</span>
<span class="err">!</span><span class="n">gen3</span> <span class="n">drs</span><span class="o">-</span><span class="n">pull</span> <span class="nb">object</span> <span class="n">dg</span><span class="o">.</span><span class="n">H34L</span><span class="o">/</span><span class="n">b1aa1e7c</span><span class="o">-</span><span class="mi">7869</span><span class="o">-</span><span class="mi">475</span><span class="n">a</span><span class="o">-</span><span class="mi">841</span><span class="n">c</span><span class="o">-</span><span class="n">e2a94ac79481</span>
<span class="err">!</span><span class="n">gen3</span> <span class="n">drs</span><span class="o">-</span><span class="n">pull</span> <span class="nb">object</span> <span class="n">dg</span><span class="o">.</span><span class="n">H34L</span><span class="o">/</span><span class="n">f726fbdb</span><span class="o">-</span><span class="n">c7c1</span><span class="o">-</span><span class="mi">423</span><span class="n">d</span><span class="o">-</span><span class="mi">99</span><span class="n">d7</span><span class="o">-</span><span class="mi">842</span><span class="n">da441b509</span>
</code></pre></div>
<pre><code>{"succeeded": ["dg.H34L/4b26774b-4629-4363-8443-e335d0de40c2"], "failed": []}
{"succeeded": ["dg.H34L/173bf921-776f-4c86-8ea0-619afdba0f1e"], "failed": []}
{"succeeded": ["dg.H34L/4f2764bd-8847-4037-ad1b-0c16d15f38d9"], "failed": []}
{"succeeded": ["dg.H34L/8128a7c0-1791-4380-b7b1-a9af8a104304"], "failed": []}
{"succeeded": ["dg.H34L/e091ebec-f111-4917-8317-204c6b969011"], "failed": []}
{"succeeded": ["dg.H34L/b1aa1e7c-7869-475a-841c-e2a94ac79481"], "failed": []}
{"succeeded": ["dg.H34L/f726fbdb-c7c1-423d-99d7-842da441b509"], "failed": []}
</code></pre>
<h3 id="common-code-for-graphics">Common Code for Graphics<a class="headerlink" href="#common-code-for-graphics" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">thousands</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%1.0f</span><span class="s2">K&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">millions</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%1.0f</span><span class="s2">M&quot;</span> <span class="o">%</span> <span class="nb">round</span><span class="p">((</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">percents</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">%&quot;</span>
</code></pre></div>
<h2 id="2-import-datasets">2) Import Datasets<a class="headerlink" href="#2-import-datasets" title="Permanent link">&para;</a></h2>
<h3 id="import-dea-arcos">Import DEA ARCOS<a class="headerlink" href="#import-dea-arcos" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">arcos_drug_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./dea_arcos_drug_list.tsv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">arcos_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./dea_arcos_county_population.tsv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">arcos_df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./dea_arcos_combined_county_annual.tsv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">arcos_state_pop</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./dea_arcos_state_population.tsv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">arcos_drug_list</span> <span class="o">=</span> <span class="n">arcos_drug_list</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Unnamed: 0&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;KEY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;BUYER_COUNTY&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;BUYER_STATE&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">arcos_df</span> <span class="o">=</span> <span class="n">arcos_df</span><span class="p">[[</span><span class="s2">&quot;KEY&quot;</span><span class="p">,</span> <span class="s2">&quot;BUYER_COUNTY&quot;</span><span class="p">,</span> <span class="s2">&quot;BUYER_STATE&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;population&quot;</span><span class="p">]]</span>

<span class="n">arcos_df1</span><span class="p">[</span><span class="s2">&quot;KEY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arcos_df1</span><span class="p">[</span><span class="s2">&quot;BUYER_COUNTY&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="n">arcos_df1</span><span class="p">[</span><span class="s2">&quot;BUYER_STATE&quot;</span><span class="p">]</span><span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="n">arcos_df1</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">arcos_df1</span> <span class="o">=</span> <span class="n">arcos_df1</span><span class="p">[[</span><span class="s2">&quot;KEY&quot;</span><span class="p">,</span> <span class="s2">&quot;BUYER_STATE&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="s2">&quot;DOSAGE_UNIT&quot;</span><span class="p">]]</span>
<span class="n">arcos_df1</span> <span class="o">=</span> <span class="n">arcos_df1</span><span class="p">[</span><span class="n">arcos_df1</span><span class="p">[</span><span class="s2">&quot;KEY&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>

<span class="n">counts</span> <span class="o">=</span> <span class="n">arcos_df1</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;KEY&quot;</span><span class="p">)[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="n">doses</span> <span class="o">=</span> <span class="n">arcos_df1</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;KEY&quot;</span><span class="p">)[</span><span class="s2">&quot;DOSAGE_UNIT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

<span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;KEY&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
<span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;dosages&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;KEY&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">doses</span><span class="p">)</span>
<span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;pills per capita&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">arcos_df</span><span class="p">[</span><span class="s2">&quot;population&quot;</span><span class="p">]</span>

<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">arcos_drug_list</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">()))</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">arcos_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">()))</span>
</code></pre></div>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="left">DRUG_NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="left">FENTANYL</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">MORPHINE</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">MEPERIDINE</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">HYDROCODONE</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">OXYCODONE</td>
</tr>
<tr>
<td align="right">5</td>
<td align="left">CODEINE</td>
</tr>
<tr>
<td align="right">6</td>
<td align="left">HYDROMORPHONE</td>
</tr>
<tr>
<td align="right">7</td>
<td align="left">METHADONE</td>
</tr>
<tr>
<td align="right">8</td>
<td align="left">BUPRENORPHINE</td>
</tr>
<tr>
<td align="right">9</td>
<td align="left">OXYMORPHONE</td>
</tr>
<tr>
<td align="right">10</td>
<td align="left">OPIUM, POWDERED</td>
</tr>
<tr>
<td align="right">11</td>
<td align="left">TAPENTADOL</td>
</tr>
<tr>
<td align="right">12</td>
<td align="left">LEVORPHANOL</td>
</tr>
<tr>
<td align="right">13</td>
<td align="left">DIHYDROCODEINE</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="left">KEY</th>
<th align="left">BUYER_COUNTY</th>
<th align="left">BUYER_STATE</th>
<th align="right">year</th>
<th align="right">population</th>
<th align="right">count</th>
<th align="right">dosages</th>
<th align="right">pills per capita</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="left">AUTAUGA, AL, 2006</td>
<td align="left">AUTAUGA</td>
<td align="left">AL</td>
<td align="right">2006</td>
<td align="right">51328</td>
<td align="right">5470</td>
<td align="right">2.27714e+06</td>
<td align="right">0.10657</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">BALDWIN, AL, 2006</td>
<td align="left">BALDWIN</td>
<td align="left">AL</td>
<td align="right">2006</td>
<td align="right">168121</td>
<td align="right">17381</td>
<td align="right">6.3538e+06</td>
<td align="right">0.103384</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">BARBOUR, AL, 2006</td>
<td align="left">BARBOUR</td>
<td align="left">AL</td>
<td align="right">2006</td>
<td align="right">27861</td>
<td align="right">2920</td>
<td align="right">827060</td>
<td align="right">0.104806</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">BIBB, AL, 2006</td>
<td align="left">BIBB</td>
<td align="left">AL</td>
<td align="right">2006</td>
<td align="right">22099</td>
<td align="right">1899</td>
<td align="right">754210</td>
<td align="right">0.0859315</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">BLOUNT, AL, 2006</td>
<td align="left">BLOUNT</td>
<td align="left">AL</td>
<td align="right">2006</td>
<td align="right">55485</td>
<td align="right">2757</td>
<td align="right">1.2903e+06</td>
<td align="right">0.0496891</td>
</tr>
</tbody>
</table>
<p>Import the DEA ARCOS datasets for county and state populations from 2006 to 2014, and for the total pharmacy and practitioner pill counts by county and year. The county population and pill counts datasets are combined using a common key (county name, state name, year). An additional feature is added, 'pills per capita' which is the number of opioid pills per person in each county. Some counties have an abnormally large ratio of opioid pills per person; however these are from low county population sizes.</p>
<p>DEA ARCOS: https://www.deadiversion.usdoj.gov/arcos/index.html</p>
<h3 id="import-cdc-wonder">Import CDC WONDER<a class="headerlink" href="#import-cdc-wonder" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">annual_overdoses</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./CDC_WONDER_unintentional_overdoses.tsv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">annual_suicides</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./CDC_WONDER_suicide_overdoses.tsv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">monthly_overdoses</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./monthly_unintentional_overdoses.tsv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">annual_overdoses</span> <span class="o">=</span> <span class="n">annual_overdoses</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;Unnamed: 0&quot;</span><span class="p">,</span> <span class="s2">&quot;Notes&quot;</span><span class="p">,</span> <span class="s2">&quot;Year Code&quot;</span><span class="p">,</span> <span class="s2">&quot;State Code&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">annual_overdoses</span> <span class="o">=</span> <span class="n">annual_overdoses</span><span class="p">[</span><span class="n">annual_overdoses</span><span class="p">[</span><span class="s2">&quot;Deaths&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
<span class="n">annual_overdoses</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annual_overdoses</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
<span class="n">annual_overdoses</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f Population&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">annual_overdoses</span><span class="p">[</span><span class="s1">&#39;Deaths&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">annual_overdoses</span><span class="p">[</span><span class="s1">&#39;Population&#39;</span><span class="p">])</span><span class="o">*</span><span class="mi">100</span>

<span class="n">annual_suicides</span> <span class="o">=</span> <span class="n">annual_suicides</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Unnamed: 0&#39;</span><span class="p">,</span> <span class="s1">&#39;Notes&#39;</span><span class="p">,</span> <span class="s1">&#39;State Code&#39;</span><span class="p">,</span> <span class="s1">&#39;Year Code&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">annual_suicides</span> <span class="o">=</span> <span class="n">annual_suicides</span><span class="p">[</span><span class="n">annual_suicides</span><span class="p">[</span><span class="s1">&#39;Deaths&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
<span class="n">annual_suicides</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annual_suicides</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
<span class="n">annual_suicides</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f Population&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">annual_suicides</span><span class="p">[</span><span class="s1">&#39;Deaths&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">annual_suicides</span><span class="p">[</span><span class="s1">&#39;Population&#39;</span><span class="p">])</span><span class="o">*</span><span class="mi">100</span>

<span class="n">monthly_overdoses</span> <span class="o">=</span> <span class="n">monthly_overdoses</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Notes&#39;</span><span class="p">,</span> <span class="s1">&#39;State Code&#39;</span><span class="p">,</span> <span class="s1">&#39;Year Code&#39;</span><span class="p">,</span> <span class="s1">&#39;Population&#39;</span><span class="p">,</span> <span class="s1">&#39;Crude Rate&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">monthly_overdoses</span> <span class="o">=</span> <span class="n">monthly_overdoses</span><span class="p">[</span><span class="n">monthly_overdoses</span><span class="p">[</span><span class="s1">&#39;Deaths&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
<span class="n">monthly_overdoses</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">monthly_overdoses</span><span class="p">[</span><span class="s2">&quot;Year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>

<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">annual_overdoses</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">()))</span>
<span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">annual_suicides</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">()))</span>
</code></pre></div>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">Year</th>
<th align="left">State</th>
<th align="right">Deaths</th>
<th align="right">Population</th>
<th align="right">Crude Rate</th>
<th align="right">Crude Rate Lower 95% Confidence Interval</th>
<th align="right">Crude Rate Upper 95% Confidence Interval</th>
<th align="right">Crude Rate Standard Error</th>
<th align="left">% of Total Deaths</th>
<th align="right">% of Population</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="right">2000</td>
<td align="left">Alabama</td>
<td align="right">31</td>
<td align="right">4.4471e+06</td>
<td align="right">0.7</td>
<td align="right">0.47</td>
<td align="right">0.99</td>
<td align="right">0.13</td>
<td align="left">0.01%</td>
<td align="right">0.000697083</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">2000</td>
<td align="left">Alaska</td>
<td align="right">22</td>
<td align="right">626932</td>
<td align="right">3.51</td>
<td align="right">2.2</td>
<td align="right">5.31</td>
<td align="right">0.75</td>
<td align="left">0.01%</td>
<td align="right">0.00350915</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">2000</td>
<td align="left">Arizona</td>
<td align="right">195</td>
<td align="right">5.13063e+06</td>
<td align="right">3.8</td>
<td align="right">3.27</td>
<td align="right">4.33</td>
<td align="right">0.27</td>
<td align="left">0.05%</td>
<td align="right">0.0038007</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">2000</td>
<td align="left">California</td>
<td align="right">891</td>
<td align="right">3.38716e+07</td>
<td align="right">2.63</td>
<td align="right">2.46</td>
<td align="right">2.8</td>
<td align="right">0.09</td>
<td align="left">0.21%</td>
<td align="right">0.00263052</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">2000</td>
<td align="left">Colorado</td>
<td align="right">115</td>
<td align="right">4.30126e+06</td>
<td align="right">2.67</td>
<td align="right">2.18</td>
<td align="right">3.16</td>
<td align="right">0.25</td>
<td align="left">0.03%</td>
<td align="right">0.00267363</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">Year</th>
<th align="left">State</th>
<th align="right">Deaths</th>
<th align="right">Population</th>
<th align="left">Crude Rate</th>
<th align="right">Crude Rate Lower 95% Confidence Interval</th>
<th align="right">Crude Rate Upper 95% Confidence Interval</th>
<th align="right">Crude Rate Standard Error</th>
<th align="left">% of Total Deaths</th>
<th align="right">% of Population</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="right">2000</td>
<td align="left">Arizona</td>
<td align="right">21</td>
<td align="right">5.13063e+06</td>
<td align="left">0.41</td>
<td align="right">0.25</td>
<td align="right">0.63</td>
<td align="right">0.09</td>
<td align="left">0.07%</td>
<td align="right">0.000409306</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">2000</td>
<td align="left">California</td>
<td align="right">81</td>
<td align="right">3.38716e+07</td>
<td align="left">0.24</td>
<td align="right">0.19</td>
<td align="right">0.3</td>
<td align="right">0.03</td>
<td align="left">0.27%</td>
<td align="right">0.000239138</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">2000</td>
<td align="left">Colorado</td>
<td align="right">19</td>
<td align="right">4.30126e+06</td>
<td align="left">Unreliable</td>
<td align="right">0.27</td>
<td align="right">0.69</td>
<td align="right">0.1</td>
<td align="left">0.06%</td>
<td align="right">0.000441731</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">2000</td>
<td align="left">Florida</td>
<td align="right">78</td>
<td align="right">1.59824e+07</td>
<td align="left">0.49</td>
<td align="right">0.39</td>
<td align="right">0.61</td>
<td align="right">0.06</td>
<td align="left">0.26%</td>
<td align="right">0.000488038</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">2000</td>
<td align="left">Georgia</td>
<td align="right">14</td>
<td align="right">8.18645e+06</td>
<td align="left">Unreliable</td>
<td align="right">0.09</td>
<td align="right">0.29</td>
<td align="right">0.05</td>
<td align="left">0.05%</td>
<td align="right">0.000171014</td>
</tr>
</tbody>
</table>
<p>Import the CDC WONDER datasets for annual, recorded opioid related unintentional overdoses and suicides, and monthly unintentional opioid overdoses. HEAL hosts the entire CDC WONDER dataset as well as these filtered datasets. Below are links to the CDC WONDER codebook explaining the ICD (International Classifications of Diseases) codes used in filtering for opioid related deaths and to the CDC WONDER website.</p>
<p>CDC WONDER: https://wonder.cdc.gov
ICD Opioid Codebook: https://mnprc.org/wp-content/uploads/2019/01/using-icd-10-codes-to-assess-opioid-related-overdose-deaths.pdf</p>
<h2 id="3-national-opioid-deaths-and-opioid-prevalence">3) National Opioid Deaths And Opioid Prevalence<a class="headerlink" href="#3-national-opioid-deaths-and-opioid-prevalence" title="Permanent link">&para;</a></h2>
<h3 id="national-unintentional-opioid-overdoses-and-suicides">National Unintentional Opioid Overdoses And Suicides<a class="headerlink" href="#national-unintentional-opioid-overdoses-and-suicides" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">national_overdoses</span> <span class="o">=</span> <span class="n">annual_overdoses</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">)[</span><span class="s2">&quot;Deaths&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">annual_suicides</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">)[</span><span class="s2">&quot;Deaths&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">national_overdoses</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">ymax</span><span class="o">=</span><span class="n">national_overdoses</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Annual National Opioid Overdoses And Suicides&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Deaths&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="n">thousands</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;img/Opioid_Prevalence_And_Overdoses/figure1.png&#39;</span><span class="p">)</span>
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;img/Opioid_Prevalence_And_Overdoses/figure1.png&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../img/Opioid_Prevalence_And_Overdoses/figure1.png" /></p>
<p>We see above that since 2000 the annual number of unintentional opioid overdoses and suicides has increased by more than a factor five and that since 2010 the annual number of deaths has more than doubled.</p>
<h3 id="national-opioid-prevalence">National Opioid Prevalence<a class="headerlink" href="#national-opioid-prevalence" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">opioids_yearly</span> <span class="o">=</span> <span class="n">arcos_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">opioids_yearly</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;grey&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Annual National Pharmacy and Practitioner Pill Count&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Pill Count&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="n">millions</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;img/Opioid_Prevalence_And_Overdoses/figure2.png&#39;</span><span class="p">)</span>
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;img/Opioid_Prevalence_And_Overdoses/figure2.png&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../img/Opioid_Prevalence_And_Overdoses/figure2.png" /></p>
<p>We see above that the number of opioid pills in the United States has increased steadily from 2006 until 2013 when a significant decline occurred in the annual opioid pill count. It should be noted that the count only records pharmacy and practitioner's pill counts and does not include any illicit opioids. The types of opioids included in the count are listed in the arcos_drug_list dataframe shown previously.</p>
<h3 id="states-with-the-highest-annual-overdose-rate">States With The Highest Annual Overdose Rate<a class="headerlink" href="#states-with-the-highest-annual-overdose-rate" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">top_states</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">annual_overdoses</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">)[[</span><span class="s2">&quot;State&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f Population&quot;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">grp</span><span class="p">:</span> <span class="n">grp</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f Population&quot;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">top_states</span><span class="p">[</span><span class="s1">&#39;State_and_Year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">top_states</span><span class="p">[</span><span class="s1">&#39;State&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="n">top_states</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span>
<span class="n">top_states</span> <span class="o">=</span> <span class="n">top_states</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;level_1&#39;</span><span class="p">,</span> <span class="s1">&#39;State&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">top_states</span><span class="p">[</span><span class="s1">&#39;State_and_Year&#39;</span><span class="p">],</span>
    <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">ymax</span><span class="o">=</span><span class="n">top_states</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f Population&#39;</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unintentional Opioid Overdoses&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;State and Year&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Overdoses As Percent </span><span class="se">\n</span><span class="s2"> Of Population&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="n">percents</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;img/Opioid_Prevalence_And_Overdoses/figure3.png&#39;</span><span class="p">)</span>
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;img/Opioid_Prevalence_And_Overdoses/figure3.png&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../img/Opioid_Prevalence_And_Overdoses/figure3.png" /></p>
<p>In the last twenty years West Virginia has consistently had the highest percentage of unintentional opioid overdose deaths. West Virginia is the leading state in thirteen of the last twenty years including during the time period where there was a significant increase in annual opioid related overdoses and suicides (see figure 1).</p>
<p>Going forward we will take a closer look at West Virginia's statewide opioid overdose and suicide mortality rate and respective changes in anti-epidemic policy.</p>
<h2 id="4-data-cleaning">4) Data Cleaning<a class="headerlink" href="#4-data-cleaning" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">overdoses_wv</span> <span class="o">=</span> <span class="n">annual_overdoses</span><span class="p">[</span><span class="n">annual_overdoses</span><span class="p">[</span><span class="s2">&quot;State&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;West Virginia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">overdoses_wv</span> <span class="o">=</span> <span class="n">overdoses_wv</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">suicides_wv</span> <span class="o">=</span> <span class="n">annual_suicides</span><span class="p">[</span><span class="n">annual_suicides</span><span class="p">[</span><span class="s2">&quot;State&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;West Virginia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">suicides_wv</span> <span class="o">=</span> <span class="n">suicides_wv</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">monthly_overdoses_wv</span> <span class="o">=</span> <span class="n">monthly_overdoses</span><span class="p">[</span><span class="n">monthly_overdoses</span><span class="p">[</span><span class="s2">&quot;State&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;West Virginia&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">monthly_overdoses_wv</span> <span class="o">=</span> <span class="n">monthly_overdoses_wv</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">years</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2006&#39;</span><span class="p">,</span> <span class="s1">&#39;2007&#39;</span><span class="p">,</span> <span class="s1">&#39;2008&#39;</span><span class="p">,</span> <span class="s1">&#39;2009&#39;</span><span class="p">,</span> <span class="s1">&#39;2010&#39;</span><span class="p">,</span> <span class="s1">&#39;2011&#39;</span><span class="p">,</span> <span class="s1">&#39;2012&#39;</span><span class="p">,</span>
          <span class="s1">&#39;2013&#39;</span><span class="p">,</span> <span class="s1">&#39;2014&#39;</span><span class="p">,</span> <span class="s1">&#39;2015&#39;</span><span class="p">,</span> <span class="s1">&#39;2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2017&#39;</span><span class="p">,</span> <span class="s1">&#39;2018&#39;</span><span class="p">,</span> <span class="s1">&#39;2019&#39;</span><span class="p">]</span>
<span class="n">ticks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">monthly_overdoses_wv</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">monthly_overdoses_wv</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">year</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div>
<h2 id="5-west-virginias-opioid-overdoses-and-suicides">5) West Virginia's Opioid Overdoses and Suicides<a class="headerlink" href="#5-west-virginias-opioid-overdoses-and-suicides" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">lns1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">overdoses_wv</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">],</span> <span class="n">overdoses_wv</span><span class="p">[</span><span class="s1">&#39;Deaths&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Overdoses&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>
<span class="n">lns2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">suicides_wv</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">],</span> <span class="n">suicides_wv</span><span class="p">[</span><span class="s1">&#39;Deaths&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Overdoses&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; West Virginia&#39;s Annual Opioid Overdoses and Suicides&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Deaths&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">red_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Suicides&#39;</span><span class="p">)</span>
<span class="n">grey_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Overdoses&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">grey_patch</span><span class="p">,</span> <span class="n">red_patch</span><span class="p">])</span>

<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;img/Opioid_Prevalence_And_Overdoses/figure4.png&#39;</span><span class="p">)</span>
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;img/Opioid_Prevalence_And_Overdoses/figure4.png&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../img/Opioid_Prevalence_And_Overdoses/figure4.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">monthly_overdoses_wv</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">monthly_overdoses_wv</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;2006&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">monthly_overdoses_wv</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">monthly_overdoses_wv</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;2019&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">monthly_overdoses_wv</span><span class="p">[</span><span class="s1">&#39;RollingYrAvg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">monthly_overdoses_wv</span><span class="p">[</span><span class="s1">&#39;Deaths&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">lns1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">monthly_overdoses_wv</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">ymax</span><span class="o">=</span><span class="n">monthly_overdoses_wv</span><span class="p">[</span><span class="s1">&#39;Deaths&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Deaths&#39;</span>
<span class="p">)</span>
<span class="n">lns2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">monthly_overdoses_wv</span><span class="p">[</span><span class="s1">&#39;RollingYrAvg&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Deaths Rolling Avg.&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;West Virginia&#39;s Monthly Unintentional Overdose Deaths&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">years</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Unintentional Overdose Deaths&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;img/Opioid_Prevalence_And_Overdoses/figure5.png&#39;</span><span class="p">)</span>
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;img/Opioid_Prevalence_And_Overdoses/figure5.png&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../img/Opioid_Prevalence_And_Overdoses/figure5.png" /></p>
<p>Since 2000 the annual number of reported unintentional opioid overdoses has grown from 24 in 2000 to over 600 in 2019 and since 2010 the annual number of unintentional overdoses has nearly doubled. The number of opioid related suicides has remained relatively steady since 2000.</p>
<p>The second image looks at West Virginia's monthly unintentional overdoses with a 6 month rolling average. Here we can see there is not a large level of variation to the number of deaths on a monthly basis but the 6 month rolling average has a clear upward trend.</p>
<p><em>The bar graphs for overdoses and suicides are superimposed, not stacked.
</em>Some data is missing at a monthly level, particularly prior to 2010.</p>
<h2 id="6-conclusions">6) Conclusions<a class="headerlink" href="#6-conclusions" title="Permanent link">&para;</a></h2>
<p>In this notebook we first looked at (figure 1) the annual national opioid suicides and unintentional overdoses and in (figure 2) the annual national pharmacy and practitioner opioid pill counts. Next, we found (figure 3) the states each year who have the highest rate of unintentional opioid overdose deaths as a percentage of each state's respective population. Finally, we examined opioid related suicides and unintentional overdoses at the state level in West Virgina (figure 4 and 5).</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../Opioid_Risk_Metric_Threshold_Identification-Study_Recreation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Opioid Risk Metric Threshold Identification - Study Recreation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Opioid Risk Metric Threshold Identification - Study Recreation
            </div>
          </div>
        </a>
      
      
        
        <a href="../Monitoring_The_Future_12th_Grader_Opiate_Use_In_2019/" class="md-footer__link md-footer__link--next" aria-label="Next: MTF 12th Grader Opiate Use In 2019" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              MTF 12th Grader Opiate Use In 2019
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.indexes", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.37e9125f.min.js"></script>
      
    
  </body>
</html>